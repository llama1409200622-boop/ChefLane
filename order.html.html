<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Place Order</title>
<link rel="stylesheet" href="style.css">

<style>
.container {
    max-width: 600px;
    margin: 40px auto;
    background: #fff8f0;
    padding: 20px;
    border-radius: 10px;
}

h2 {
    text-align: center;
}

button {
    cursor: pointer;
}

.order-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: white;
    padding: 10px;
    border-radius: 6px;
    margin-bottom: 10px;
}

.order-item button {
    background: red;
    color: white;
    border: none;
    padding: 5px 10px;
    cursor: pointer;
    border-radius: 4px;
}

.order-item input {
    width: 50px;
}

.place-button, .back-button {
    width: 100%;
    padding: 12px;
    font-size: 16px;
    border: none;
    border-radius: 6px;
    margin-top: 10px;
}

.place-button {
    background: #ff6f61;
    color: white;
}

.back-button {
    background: #888;
    color: white;
}
</style>
</head>

<body>

<nav>
    <h1>Chef Lane</h1>
    <div>
        <a href="index.html">Home</a>
        <a href="menu.html">Menu</a>
        <a href="order.html">Order</a>
    </div>
</nav>

<div class="container">
    <h2>Your Order</h2>

    <label>Your Name:</label>
    <input type="text" id="customerName" placeholder="Enter name">

    <label>Phone Number:</label>
    <input type="text" id="phoneNumber" placeholder="Enter phone number">

    <label>Address:</label>
    <input type="text" id="address" placeholder="Enter delivery address">

    <h3>Selected Dishes</h3>
    <div id="dish-list"></div>

    <h3>Delivery Fee: <strong>60 TK</strong></h3>

    <h3>Total: <span id="total">0</span> TK</h3>

    <button class="place-button" onclick="placeOrder()">Place Order</button>
    <button class="back-button" onclick="goBackToMenu()">‚Üê Back to Menu</button>
</div>

<script>
const urlParams = new URLSearchParams(window.location.search);
let dishes = urlParams.get('dishes') ? urlParams.get('dishes').split(',') : [];

let prices = {
    "Bhelpuri": 250,
    "Mushroom(per 100g)": 300,
    "Chicken Mushroom Pizza": 300,
    "Chicken Jhal Polao": 180,
    "Pasta Alfredo": 200,
    "Margherita Pizza": 220,
    "Vegetable Stir Fry": 180,
    "Quinoa Salad": 200
};

// allow multiple same dishes
let orderList = dishes.map((dish, index) => ({ id: index, name: dish, quantity: 1 }));

function renderDishes() {
    const container = document.getElementById("dish-list");
    container.innerHTML = "";

    orderList.forEach(item => {
        let div = document.createElement("div");
        div.className = "order-item";
        div.innerHTML = `
            <span>${item.name} - ${prices[item.name]} TK</span>
            <input type="number" value="${item.quantity}" min="1" onchange="changeQty(${item.id}, this.value)">
            <button onclick="removeDish(${item.id})">X</button>
        `;
        container.appendChild(div);
    });

    updateTotal();
}

function changeQty(id, qty) {
    const item = orderList.find(i => i.id === id);
    if (item) item.quantity = parseInt(qty);
    updateTotal();
}

function removeDish(id) {
    orderList = orderList.filter(i => i.id !== id);
    renderDishes();
}

function updateTotal() {
    let total = 0;
    orderList.forEach(item => {
        total += prices[item.name] * item.quantity;
    });

    total += 60; // delivery fee
    document.getElementById("total").innerText = total;
}

function placeOrder() {
    const name = document.getElementById("customerName").value.trim();
    const phone = document.getElementById("phoneNumber").value.trim();
    const address = document.getElementById("address").value.trim();

    if (!name || !phone || !address || orderList.length === 0) {
        alert("Please fill in all fields and add at least one dish.");
        return;
    }

    // Message for admin (full details)
    let adminMessage = `Order for ${name}\nPhone: ${phone}\nAddress: ${address}\n\nDishes:\n`;
    let totalPrice = 0;
    orderList.forEach(item => {
        adminMessage += `${item.name} x${item.quantity} - ${prices[item.name]} TK each\n`;
        totalPrice += prices[item.name] * item.quantity;
    });
    totalPrice += 60; // delivery fee
    adminMessage += `\nDelivery Fee: 60 TK\nTotal: ${totalPrice} TK`;

    // Message for chef (no prices)
    let chefMessage = `Order for ${name}\nPhone: ${phone}\nAddress: ${address}\n\nDishes:\n`;
    orderList.forEach(item => {
        chefMessage += `${item.name} x${item.quantity}\n`;
    });

    // Replace with real numbers
    const adminNumber = "YOUR_NUMBER"; // your WhatsApp
    const chefNumber = "CHEF_NUMBER";  // chef WhatsApp

    const adminUrl = `https://wa.me/${adminNumber}?text=${encodeURIComponent(adminMessage)}`;
    const chefUrl = `https://wa.me/${chefNumber}?text=${encodeURIComponent(chefMessage)}`;

    // Open WhatsApp links
    window.open(adminUrl, "_blank");
    window.open(chefUrl, "_blank");

    alert("Order sent successfully!");
}

// Back to Menu with current dishes preserved
function goBackToMenu() {
    let currentDishes = [];
    orderList.forEach(item => {
        for (let i = 0; i < item.quantity; i++) {
            currentDishes.push(item.name);
        }
    });

    const url = "menu.html?dishes=" + encodeURIComponent(currentDishes.join(','));
    window.location.href = url;
}

renderDishes();
</script>

</body>
</html>









